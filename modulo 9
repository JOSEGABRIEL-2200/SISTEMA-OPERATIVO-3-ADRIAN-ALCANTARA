# PRACTICA 1: INSTALACIÓN DE WEBMIN

## Paso 1: Actualizar paquetes
apt update
apt upgrade -y

## Paso 2: Instalar dependencias
apt install software-properties-common apt-transport-https wget -y

## Paso 3: Importar la clave GPG de Webmin
wget -qO - http://www.webmin.com/jcameron-key.asc | apt-key add -

## Paso 4: Agregar el repositorio
add-apt-repository "deb http://download.webmin.com/download/repository sarge contrib"

## Paso 5: Instalar Webmin
apt update
apt install webmin -y

## Paso 6: Acceder a Webmin desde el navegador
https://TU-IP:10000

## Paso 7: Mostrar opciones de administración que se pueden ejecutar vía Webmin
- Administración de usuarios: crear y eliminar cuentas
- Gestión de servicios: iniciar, detener y reiniciar servicios (ej. SSH)
- Configuración de red: asignar IP estática
- Administración de software: instalar, actualizar y eliminar paquetes
- Gestión de archivos y directorios: explorar, editar y eliminar archivos
- Monitorización del sistema: memoria, procesador y almacenamiento

## NOTAS, ERRORES Y SOLUCIONES
- Error: No se puede acceder al puerto 10000  
  Causa: Firewall bloqueando el puerto  
  Solución: ufw allow 10000  
- Error: Webmin no instala por firma inválida  
  Causa: Clave GPG no agregada  
  Solución: Repetir el comando de importar clave  
- Error: Acceso denegado  
  Causa: Usuario root deshabilitado  
  Solución: Usar usuario con permisos sudo  

## TÉRMINOS IMPORTANTES
- Webmin: Panel web de administración para sistemas Linux.
- GPG: Sistema para validar firmas de software.
- Repositorio: Fuente de instalación de paquetes.
- Firewall: Sistema que controla conexiones de red.


# PRACTICA 2: DESPLIEGUE DE VM CON TERRAFORM EN DIGITALOCEAN

## Paso 1: Instalar Terraform
curl -fsSL https://apt.releases.hashicorp.com/gpg | apt-key add -
apt-add-repository "deb https://apt.releases.hashicorp.com $(lsb_release -cs) main"
apt update
apt install terraform -y

## Paso 2: Inicializar directorio de trabajo
mkdir terraform-do
cd terraform-do

## Paso 3: Crear archivo provider.tf
cat <<EOF > provider.tf
terraform {
  required_providers {
    digitalocean = {
      source = "digitalocean/digitalocean"
      version = "2.0.0"
    }
  }
}
provider "digitalocean" {
  token = var.do_token
}
EOF

## Paso 4: Crear archivo variables.tf
cat <<EOF > variables.tf
variable "do_token" {}
variable "ssh_key" {}
EOF

## Paso 5: Crear archivo main.tf
cat <<EOF > main.tf
resource "digitalocean_droplet" "os3vm" {
  image  = "ubuntu-22-04-x64"
  name   = "OS3vm"
  region = "nyc1"
  size   = "s-1vcpu-1gb"
  ssh_keys = [ var.ssh_key ]
}
EOF

## Paso 6: Crear archivo terraform.tfvars
cat <<EOF > terraform.tfvars
do_token = "TOKEN_AQUI"
ssh_key = "FINGERPRINT_O_LLAVE_AQUI"
EOF

## Paso 7: Inicializar Terraform
terraform init

## Paso 8: Previsualizar cambios
terraform plan

## Paso 9: Crear la VM
terraform apply -auto-approve

## Paso 10: Validar acceso SSH
ssh root@IP_DE_LA_VM

## NOTAS, ERRORES Y SOLUCIONES
- Error: Provider no encontrado  
  Solución: terraform init  
- Error: Authentication failed  
  Causa: SSH Key incorrecta  
  Solución: Revisar fingerprint en DigitalOcean  
- Error: Token inválido  
  Solución: Regenerar token API en DO  

## TÉRMINOS IMPORTANTES
- Terraform: Herramienta IaC para crear infraestructura.
- Token: Llave de autenticación para API.
- Fingerprint: Identificador único de la llave SSH.
- Droplet: Nombre de las máquinas virtuales en DigitalOcean.


# PRACTICA 3: INSTALACIÓN DE ANSIBLE

## Paso 1: Instalar Ansible en la VM-Server
apt update
apt install ansible -y

## Paso 2: Crear usuario ansible en Linux
adduser ansible
usermod -aG sudo ansible

## Paso 3: Generar llave SSH sin contraseña
su - ansible
ssh-keygen -t ed25519

## Paso 4: Copiar llave pública al host Linux
ssh-copy-id usuario@IP_DE_LINUX

## Paso 5: Configurar Windows para Ansible (WinRM)
winrm quickconfig

## Paso 6: Crear usuario ansible con permisos de administrador en Windows
net user ansible /add
net localgroup administrators ansible /add

## Paso 7: Configurar inventario en /etc/ansible/hosts
cat <<EOF > /etc/ansible/hosts
[win]
IP_DE_WINDOWS

[linux]
IP_DE_LINUX
EOF

## Paso 8: Probar la conexión con módulo ping
ansible win -m win_ping
ansible linux -m ping

## NOTAS, ERRORES Y SOLUCIONES
- Error: win_ping falla  
  Causa: WinRM no configurado  
  Solución: Ejecutar winrm quickconfig  
- Error: Permiso denegado SSH  
  Solución: Revisar llaves y permisos en .ssh  
- Error: Host unreachable  
  Causa: Firewall  
  Solución: Habilitar puertos 5985/5986 en Windows  

## TÉRMINOS IMPORTANTES
- Ansible: Herramienta de automatización.
- Inventario: Lista de máquinas administradas.
- WinRM: Protocolo de administración remota en Windows.
- SSH: Protocolo seguro de conexión remota.


# PRACTICA 4: COMANDOS AD-HOC CON ANSIBLE

## Paso 1: Copiar archivo txt del escritorio al documentos (Windows)
ansible win -m win_copy -a "src=/home/ansible2/Escritorio/archivo.txt dest=C:/Users/ansible/Documents/archivo.txt"

## Paso 2: Reiniciar la VM ansible1 (Linux)
ansible linux -m reboot

## NOTAS, ERRORES Y SOLUCIONES
- Error en win_copy: Ruta inválida  
  Solución: Verificar rutas absolutas  
- Error en reboot: Usuario sin sudo  
  Solución: Agregar usuario en sudoers  

## TÉRMINOS IMPORTANTES
- Ad-Hoc: Comandos rápidos sin playbooks.
- win_copy: Módulo para copiar archivos a Windows.
- reboot: Módulo para reiniciar sistemas.


# PRACTICA 5: PLAYBOOKS

## Paso 1: Crear playbook para instalar Notepad++ en Windows
cat <<EOF > install_notepad.yml
- hosts: win
  tasks:
    - name: Instalar Notepad++
      win_chocolatey:
        name: notepadplusplus
        state: present
EOF

## Paso 2: Ejecutar playbook de Windows
ansible-playbook install_notepad.yml

## Paso 3: Crear playbook para instalar NGINX en Linux
cat <<EOF > install_nginx.yml
- hosts: linux
  become: yes
  tasks:
    - name: Instalar NGINX
      apt:
        name: nginx
        state: present
        update_cache: yes

    - name: Iniciar NGINX
      service:
        name: nginx
        state: started
EOF

## Paso 4: Ejecutar playbook de Linux
ansible-playbook install_nginx.yml

## NOTAS, ERRORES Y SOLUCIONES
- Error: win_chocolatey no encontrado  
  Solución: Instalar Chocolatey en Windows  
- Error: apt lock  
  Solución: Esperar a que termine otro proceso de apt  
- Error: service falló  
  Causa: Puerto 80 ocupado  
  Solución: Liberar puerto o cambiar configuración  

## TÉRMINOS IMPORTANTES
- Playbook: Archivo YAML con tareas automatizadas.
- Chocolatey: Gestor de paquetes para Windows.
- Service: Módulo para administrar servicios en Linux.
- apt: Gestor de paquetes de Debian/Ubuntu.
